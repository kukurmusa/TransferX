{% extends "base.html" %}

{% block title %}Deals | TransferX{% endblock %}

{% block page_title %}<h1 class="text-2xl font-semibold text-white">My Deals</h1>{% endblock %}
{% block page_subtitle %}<p class="text-sm text-slate-400">Active and historical agreements.</p>{% endblock %}

{% block content %}
  {% if deals %}
    <div class="space-y-4">
      {% for deal in deals %}
        {% url 'deals:detail' deal.id as deal_url %}
        <a href="{{ deal_url }}" class="flex flex-wrap items-center justify-between gap-4 rounded-2xl border border-white/10 bg-slate-900/70 p-5 no-underline transition hover:-translate-y-1 hover:border-white/20">
          <div>
            <div class="text-lg font-semibold text-white">{{ deal.player.name }}</div>
            <div class="text-sm text-slate-400">
              {% if club.id == deal.buyer_club_id %}
                Seller: {{ deal.seller_club.name }}
              {% else %}
                Buyer: {{ deal.buyer_club.name }}
              {% endif %}
            </div>
            <div class="mt-1 text-xs text-slate-500">Created {{ deal.created_at|date:"M d, Y" }}</div>
          </div>
          <div class="text-right">
            <div class="text-xs font-semibold uppercase tracking-[0.2em] text-slate-500">Agreed fee</div>
            <div class="mt-1 text-sm font-semibold text-emerald-200">
              {% if deal.agreed_fee %}GBP {{ deal.agreed_fee }}{% else %}-{% endif %}
            </div>
            <div class="mt-2 inline-flex items-center rounded-full border border-white/10 bg-slate-800 px-3 py-1 text-xs font-semibold text-slate-200">
              {{ deal.get_status_display }}
            </div>
          </div>
        </a>
      {% endfor %}
    </div>
  {% else %}
    {% include "components/empty_state.html" with title="No deals yet" description="Accepted offers will appear here once confirmed." %}
  {% endif %}
{% endblock %}
