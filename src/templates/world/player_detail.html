{% extends "base.html" %}

{% block title %}{{ player.name }} | TransferX{% endblock %}

{% block content %}
  {% include "components/page_header.html" with title=player.name subtitle="Player profile" %}

  <div class="grid gap-6 lg:grid-cols-[minmax(0,2fr)_minmax(0,1fr)]">
    <div class="space-y-6">
      <div class="rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
        <div class="flex flex-wrap items-center gap-4">
          {% if profile and profile.photo_url %}
            <img src="{{ profile.photo_url }}" alt="{{ player.name }}" class="h-20 w-20 rounded-full border border-slate-200 bg-white" />
          {% endif %}
          <div>
            <div class="text-xl font-semibold text-slate-900">{{ player.name }}</div>
            <div class="text-sm text-slate-500">
              {% if profile %}
                {{ profile.position|default:"-" }} | Age {{ profile.age|default:"-" }}
              {% else %}
                -
              {% endif %}
            </div>
            <div class="text-sm text-slate-500">{{ player.nationality|default:"-" }}</div>
          </div>
        </div>
        <div class="mt-4 grid gap-4 sm:grid-cols-3">
          <div>
            <div class="text-xs uppercase tracking-wide text-slate-400">Height</div>
            <div class="text-sm font-semibold text-slate-900">{% if profile %}{{ profile.height|default:"-" }}{% else %}-{% endif %}</div>
          </div>
          <div>
            <div class="text-xs uppercase tracking-wide text-slate-400">Weight</div>
            <div class="text-sm font-semibold text-slate-900">{% if profile %}{{ profile.weight|default:"-" }}{% else %}-{% endif %}</div>
          </div>
          <div>
            <div class="text-xs uppercase tracking-wide text-slate-400">Current club</div>
            <div class="text-sm font-semibold text-slate-900">{% if club %}{{ club.name }}{% else %}-{% endif %}</div>
          </div>
        </div>
      </div>

      <div class="rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
        <h2 class="text-lg font-semibold text-slate-900">Season stats</h2>
        <div class="mt-4 grid gap-4 sm:grid-cols-4">
          <div>
            <div class="text-xs uppercase tracking-wide text-slate-400">Minutes</div>
            <div class="text-sm font-semibold text-slate-900">{% if profile %}{{ profile.minutes|default:"-" }}{% else %}-{% endif %}</div>
          </div>
          <div>
            <div class="text-xs uppercase tracking-wide text-slate-400">Goals</div>
            <div class="text-sm font-semibold text-slate-900">{% if profile %}{{ profile.goals|default:"-" }}{% else %}-{% endif %}</div>
          </div>
          <div>
            <div class="text-xs uppercase tracking-wide text-slate-400">Assists</div>
            <div class="text-sm font-semibold text-slate-900">{% if profile %}{{ profile.assists|default:"-" }}{% else %}-{% endif %}</div>
          </div>
          <div>
            <div class="text-xs uppercase tracking-wide text-slate-400">Avg rating</div>
            <div class="text-sm font-semibold text-slate-900">{% if profile and profile.avg_rating %}{{ profile.avg_rating|floatformat:2 }}{% else %}-{% endif %}</div>
          </div>
        </div>
      </div>
    </div>

    <div class="space-y-6">
      <div class="rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
        <h2 class="text-lg font-semibold text-slate-900">Form</h2>
        {% if profile and profile.form_score %}
          <div class="mt-3 text-3xl font-semibold text-slate-900">{{ profile.form_score|floatformat:1 }}</div>
          <div class="mt-1 text-sm text-slate-500">Trend: {% if profile.trend %}{{ profile.trend|floatformat:1 }}{% else %}-{% endif %}</div>
          {% if profile.form_score >= 75 %}
            <div class="mt-3">
              {% include "components/badge.html" with text="Hot" variant="danger" size="sm" %}
            </div>
          {% endif %}
        {% else %}
          <div class="mt-2 text-sm text-slate-500">No form data available.</div>
        {% endif %}
      </div>

      <div class="rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
        <h2 class="text-lg font-semibold text-slate-900">Club context</h2>
        {% if club %}
          {% url 'world:club_detail' club.id as club_url %}
          <div class="mt-3 text-sm text-slate-600">{{ club.name }}</div>
          <div class="text-xs text-slate-400">League {{ profile.league_id }} | Season {{ profile.season }}</div>
          {% include "components/button.html" with text="View club" href=club_url variant="secondary" size="sm" %}
        {% else %}
          <div class="mt-2 text-sm text-slate-500">No club data available.</div>
        {% endif %}
        <div class="mt-4 text-xs text-slate-500">Updated: {% if profile %}{{ profile.updated_at|date:"M d, H:i" }}{% else %}-{% endif %}</div>
      </div>

      <div class="rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
        <h2 class="text-lg font-semibold text-slate-900">Next step</h2>
        <div class="mt-2 text-sm text-slate-500">Send a professional offer to the club.</div>
        {% include "components/button.html" with text="Make offer" href=offer_link variant="primary" size="sm" %}
      </div>
    </div>
  </div>
{% endblock %}
