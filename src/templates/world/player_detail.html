{% extends "base.html" %}

{% block title %}{{ player.name }} | TransferX{% endblock %}

{% block page_title %}<h1 class="text-2xl font-semibold text-white">{{ player.name }}</h1>{% endblock %}
{% block page_subtitle %}<p class="text-sm text-slate-400">Player profile</p>{% endblock %}

{% block content %}
  <div class="grid gap-6 lg:grid-cols-[minmax(0,2fr)_minmax(0,1fr)]">
    <div class="space-y-6">
      {# Bio card #}
      <div class="rounded-xl bg-slate-900 p-6 ring-1 ring-white/[0.08]">
        <div class="flex flex-wrap items-center gap-4">
          {% if profile and profile.photo_url %}
            <img src="{{ profile.photo_url }}" alt="{{ player.name }}" class="h-20 w-20 rounded-full ring-2 ring-white/10" />
          {% endif %}
          <div>
            <div class="text-xl font-semibold text-white">{{ player.name }}</div>
            <div class="text-sm text-slate-400">
              {% if profile %}
                {{ profile.position|default:"-" }} | Age {{ profile.age|default:"-" }}
              {% else %}
                -
              {% endif %}
            </div>
            <div class="text-sm text-slate-500">{{ player.nationality|default:"-" }}</div>
          </div>
        </div>
        <div class="mt-5 grid gap-4 border-t border-white/[0.05] pt-5 sm:grid-cols-3">
          <div>
            <div class="text-xs uppercase tracking-wide text-slate-500">Height</div>
            <div class="text-sm font-semibold text-white">{% if profile %}{{ profile.height|default:"-" }}{% else %}-{% endif %}</div>
          </div>
          <div>
            <div class="text-xs uppercase tracking-wide text-slate-500">Weight</div>
            <div class="text-sm font-semibold text-white">{% if profile %}{{ profile.weight|default:"-" }}{% else %}-{% endif %}</div>
          </div>
          <div>
            <div class="text-xs uppercase tracking-wide text-slate-500">Current club</div>
            <div class="text-sm font-semibold text-white">{% if club %}{{ club.name }}{% else %}-{% endif %}</div>
          </div>
        </div>
      </div>

      {# Season stats #}
      <div class="rounded-xl bg-slate-900 p-6 ring-1 ring-white/[0.08]">
        <h2 class="text-sm font-semibold text-white">Season stats</h2>
        <div class="mt-4 grid gap-4 sm:grid-cols-4">
          <div class="rounded-lg bg-slate-800/60 p-3">
            <div class="text-xs uppercase tracking-wide text-slate-500">Minutes</div>
            <div class="mt-1 text-sm font-semibold text-white">{% if profile %}{{ profile.minutes|default:"-" }}{% else %}-{% endif %}</div>
          </div>
          <div class="rounded-lg bg-slate-800/60 p-3">
            <div class="text-xs uppercase tracking-wide text-slate-500">Goals</div>
            <div class="mt-1 text-sm font-semibold text-white">{% if profile %}{{ profile.goals|default:"-" }}{% else %}-{% endif %}</div>
          </div>
          <div class="rounded-lg bg-slate-800/60 p-3">
            <div class="text-xs uppercase tracking-wide text-slate-500">Assists</div>
            <div class="mt-1 text-sm font-semibold text-white">{% if profile %}{{ profile.assists|default:"-" }}{% else %}-{% endif %}</div>
          </div>
          <div class="rounded-lg bg-slate-800/60 p-3">
            <div class="text-xs uppercase tracking-wide text-slate-500">Avg rating</div>
            <div class="mt-1 text-sm font-semibold text-white">{% if profile and profile.avg_rating %}{{ profile.avg_rating|floatformat:2 }}{% else %}-{% endif %}</div>
          </div>
        </div>
      </div>
    </div>

    <div class="space-y-6">
      {# Form score #}
      <div class="rounded-xl bg-slate-900 p-6 ring-1 ring-white/[0.08]">
        <h2 class="text-sm font-semibold text-white">Form</h2>
        {% if profile and profile.form_score %}
          <div class="mt-3 text-3xl font-semibold text-white">{{ profile.form_score|floatformat:1 }}</div>
          <div class="mt-1 text-sm text-slate-500">Trend: {% if profile.trend %}{{ profile.trend|floatformat:1 }}{% else %}-{% endif %}</div>
          {% if profile.form_score >= 75 %}
            <div class="mt-3">
              {% include "components/badge.html" with text="Hot" variant="danger" size="sm" %}
            </div>
          {% endif %}
        {% else %}
          <div class="mt-2 text-sm text-slate-500">No form data available.</div>
        {% endif %}
      </div>

      {# Club context #}
      <div class="rounded-xl bg-slate-900 p-6 ring-1 ring-white/[0.08]">
        <h2 class="text-sm font-semibold text-white">Club context</h2>
        {% if club %}
          {% url 'world:club_detail' club.id as club_url %}
          <div class="mt-3 text-sm text-slate-300">{{ club.name }}</div>
          <div class="text-xs text-slate-500">League {{ profile.league_id }} | Season {{ profile.season }}</div>
          <div class="mt-3">
            {% include "components/button.html" with text="View club" href=club_url variant="secondary" size="sm" %}
          </div>
        {% else %}
          <div class="mt-2 text-sm text-slate-500">No club data available.</div>
        {% endif %}
        <div class="mt-4 text-xs text-slate-600">Updated: {% if profile %}{{ profile.updated_at|date:"M d, H:i" }}{% else %}-{% endif %}</div>
      </div>

      {# Next step #}
      <div class="rounded-xl bg-slate-900 p-6 ring-1 ring-white/[0.08]">
        <h2 class="text-sm font-semibold text-white">Next step</h2>
        <div class="mt-2 text-sm text-slate-500">Send a professional offer to the club.</div>
        <div class="mt-3">
          {% include "components/button.html" with text="Make offer" href=offer_link variant="primary" size="sm" %}
        </div>
      </div>
    </div>
  </div>
{% endblock %}
